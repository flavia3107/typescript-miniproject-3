(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))s(t);new MutationObserver(t=>{for(const i of t)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function r(t){const i={};return t.integrity&&(i.integrity=t.integrity),t.referrerPolicy&&(i.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?i.credentials="include":t.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(t){if(t.ep)return;t.ep=!0;const i=r(t);fetch(t.href,i)}})();var g=Object.defineProperty,y=Object.getOwnPropertyDescriptor,l=(n,e,r,s)=>{for(var t=y(e,r),i=n.length-1,o;i>=0;i--)(o=n[i])&&(t=o(e,r,t)||t);return t&&g(e,r,t),t};class j{constructor(e,r,s,t,i){this.id=e,this.title=r,this.description=s,this.people=t,this.status=i}}class E{constructor(){this.listeners=[]}addListener(e){this.listeners.push(e)}}class p extends E{constructor(){super(),this.projects=[]}static getInstance(){return this.instance?this.instance:(this.instance=new p,this.instance)}addProject(e,r,s){const t=new j(Math.random().toString(),e,r,s,0);this.projects.push(t),this.updateListeners()}moveProject(e,r){const s=this.projects.find(t=>t.id===e);s&&s.status!==r&&(s.status=r,this.updateListeners())}updateListeners(){for(const e of this.listeners)e(this.projects.slice())}}const u=p.getInstance();function a(n){let e=!0;return n.required&&(e=e&&n.value.toString().trim().length!==0),n.minLength!=null&&typeof n.value=="string"&&(e=e&&n.value.length>=n.minLength),n.maxLength!=null&&typeof n.value=="string"&&(e=e&&n.value.length<=n.maxLength),n.min!=null&&typeof n.value=="number"&&(e=e&&n.value>=n.min),n.max!=null&&typeof n.value=="number"&&(e=e&&n.value<=n.max),e}function c(n,e,r){const s=r.value;return{configurable:!0,get(){return s.bind(this)}}}class h{constructor(e,r,s,t){this.templateElement=document.getElementById(e),this.hostElement=document.getElementById(r);const i=document.importNode(this.templateElement.content,!0);this.element=i.firstElementChild,t&&(this.element.id=t),this.attach(s)}attach(e){this.hostElement.insertAdjacentElement(e?"afterbegin":"beforeend",this.element)}}class m extends h{constructor(e,r){super("single-project",e,!1,r.id),this.project=r,this.configure(),this.renderContent()}dragStartHandler(e){e.dataTransfer.setData("text/plain",this.project.id),e.dataTransfer.effectAllowed="move"}dragEndHandler(e){console.log("DragEnd")}configure(){this.element.addEventListener("dragstart",this.dragStartHandler),this.element.addEventListener("dragend",this.dragEndHandler)}renderContent(){const e=this.element.querySelector("h2");e.textContent="";const r=document.createElement("span");r.textContent=this.project.title;const s=document.createElement("span");s.className="people-number";const t=document.createTextNode(`${this.project.people.toString()}  `),i=document.createElement("img");i.src="./people.svg",s.appendChild(i),s.appendChild(t),e.appendChild(r),e.appendChild(s),this.element.querySelector("p").textContent=this.project.description}}l([c],m.prototype,"dragStartHandler");class d extends h{constructor(e){super("project-list","app",!1,`${e}-projects`),this.type=e,this.assignedProjects=[],this.configure(),this.renderContent()}dragOverHandler(e){e.dataTransfer&&e.dataTransfer.types[0]==="text/plain"&&(e.preventDefault(),this.element.querySelector("ul").classList.add("droppable"))}dropHandler(e){const r=e.dataTransfer.getData("text/plain");u.moveProject(r,this.type==="active"?0:1)}dragLeaveHandler(e){this.element.querySelector("ul").classList.remove("droppable")}configure(){this.element.addEventListener("dragover",this.dragOverHandler),this.element.addEventListener("dragleave",this.dragLeaveHandler),this.element.addEventListener("drop",this.dropHandler),u.addListener(e=>{const r=e.filter(s=>this.type==="active"?s.status===0:s.status===1);this.assignedProjects=r,this.renderProjects()})}renderContent(){const e=`${this.type}-projects-list`;this.element.querySelector("ul").id=e,this.element.querySelector("h2").textContent=`${this.type} Projects`}renderProjects(){const e=document.getElementById(`${this.type}-projects-list`);e.innerHTML="";for(const r of this.assignedProjects)new m(this.element.querySelector("ul").id,r)}}l([c],d.prototype,"dragOverHandler");l([c],d.prototype,"dropHandler");l([c],d.prototype,"dragLeaveHandler");class f extends h{constructor(){super("project-input","form",!0,"user-input"),this.titleInputElement=this.element.querySelector("#title"),this.descriptionInputElement=this.element.querySelector("#description"),this.peopleInputElement=this.element.querySelector("#people"),this.configure()}configure(){this.element.addEventListener("submit",this.submitHandler)}renderContent(){}gatherUserInput(){const e=this.titleInputElement.value,r=this.descriptionInputElement.value,s=this.peopleInputElement.value,t={value:e,required:!0},i={value:r,required:!0,minLength:5},o={value:+s,required:!0,min:1,max:5};if(!a(t)||!a(i)||!a(o)){alert("Invalid input, please try again!");return}else return[e,r,+s]}clearInputs(){this.titleInputElement.value="",this.descriptionInputElement.value="",this.peopleInputElement.value=""}submitHandler(e){e.preventDefault();const r=this.gatherUserInput();if(Array.isArray(r)){const[s,t,i]=r;u.addProject(s,t,i),this.clearInputs()}}}l([c],f.prototype,"submitHandler");new f;new d("active");new d("finished");
