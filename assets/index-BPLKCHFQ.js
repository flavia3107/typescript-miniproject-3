(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))i(t);new MutationObserver(t=>{for(const s of t)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function r(t){const s={};return t.integrity&&(s.integrity=t.integrity),t.referrerPolicy&&(s.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?s.credentials="include":t.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(t){if(t.ep)return;t.ep=!0;const s=r(t);fetch(t.href,s)}})();class u{constructor(e,r,i,t){this.templateElement=document.getElementById(e),this.hostElement=document.getElementById(r);const s=document.importNode(this.templateElement.content,!0);this.element=s.firstElementChild,t&&(this.element.id=t),this.attach(i)}attach(e){this.hostElement.insertAdjacentElement(e?"afterbegin":"beforeend",this.element)}}function a(n){let e=!0;return n.required&&(e=e&&n.value.toString().trim().length!==0),n.minLength!=null&&typeof n.value=="string"&&(e=e&&n.value.length>=n.minLength),n.maxLength!=null&&typeof n.value=="string"&&(e=e&&n.value.length<=n.maxLength),n.min!=null&&typeof n.value=="number"&&(e=e&&n.value>=n.min),n.max!=null&&typeof n.value=="number"&&(e=e&&n.value<=n.max),e}function c(n,e,r){const i=r.value;return{configurable:!0,get(){return i.bind(this)}}}var l=(n=>(n[n.Active=0]="Active",n[n.Finished=1]="Finished",n))(l||{});class v{constructor(e,r,i,t,s){this.id=e,this.title=r,this.description=i,this.people=t,this.status=s}}class y{constructor(){this.listeners=[]}addListener(e){this.listeners.push(e)}}class h extends y{constructor(){super(),this.projects=[]}static getInstance(){return this.instance?this.instance:(this.instance=new h,this.instance)}addProject(e,r,i){const t=new v(Math.random().toString(),e,r,i,l.Active);this.projects.push(t),this.updateListeners()}moveProject(e,r){const i=this.projects.find(t=>t.id===e);i&&i.status!==r&&(i.status=r,this.updateListeners())}updateListeners(){for(const e of this.listeners)e(this.projects.slice())}}const p=h.getInstance();var j=Object.defineProperty,E=Object.getOwnPropertyDescriptor,P=(n,e,r,i)=>{for(var t=E(e,r),s=n.length-1,o;s>=0;s--)(o=n[s])&&(t=o(e,r,t)||t);return t&&j(e,r,t),t};class f extends u{constructor(){super("project-input","form",!0,"user-input"),this.titleInputElement=this.element.querySelector("#title"),this.descriptionInputElement=this.element.querySelector("#description"),this.peopleInputElement=this.element.querySelector("#people"),this.configure()}configure(){this.element.addEventListener("submit",this.submitHandler)}renderContent(){}gatherUserInput(){const e=this.titleInputElement.value,r=this.descriptionInputElement.value,i=this.peopleInputElement.value,t={value:e,required:!0},s={value:r,required:!0,minLength:5},o={value:+i,required:!0,min:1,max:5};if(!a(t)||!a(s)||!a(o)){alert("Invalid input, please try again!");return}else return[e,r,+i]}clearInputs(){this.titleInputElement.value="",this.descriptionInputElement.value="",this.peopleInputElement.value=""}submitHandler(e){e.preventDefault();const r=this.gatherUserInput();if(Array.isArray(r)){const[i,t,s]=r;p.addProject(i,t,s),this.clearInputs()}}}P([c],f.prototype,"submitHandler");var L=Object.defineProperty,O=Object.getOwnPropertyDescriptor,_=(n,e,r,i)=>{for(var t=O(e,r),s=n.length-1,o;s>=0;s--)(o=n[s])&&(t=o(e,r,t)||t);return t&&L(e,r,t),t};class g extends u{constructor(e,r){super("single-project",e,!1,r.id),this.project=r,this.configure(),this.renderContent()}dragStartHandler(e){e.dataTransfer.setData("text/plain",this.project.id),e.dataTransfer.effectAllowed="move"}dragEndHandler(e){console.log("DragEnd")}configure(){this.element.addEventListener("dragstart",this.dragStartHandler),this.element.addEventListener("dragend",this.dragEndHandler)}renderContent(){const e=this.element.querySelector("h2");e.textContent="";const r=document.createElement("span");r.textContent=this.project.title;const i=document.createElement("span");i.className="people-number";const t=document.createTextNode(`${this.project.people.toString()}  `),s=document.createElement("img");s.src="./people.svg",i.appendChild(s),i.appendChild(t),e.appendChild(r),e.appendChild(i),this.element.querySelector("p").textContent=this.project.description}}_([c],g.prototype,"dragStartHandler");var x=Object.defineProperty,C=Object.getOwnPropertyDescriptor,m=(n,e,r,i)=>{for(var t=C(e,r),s=n.length-1,o;s>=0;s--)(o=n[s])&&(t=o(e,r,t)||t);return t&&x(e,r,t),t};class d extends u{constructor(e){super("project-list","app",!1,`${e}-projects`),this.type=e,this.assignedProjects=[],this.configure(),this.renderContent()}dragOverHandler(e){e.dataTransfer&&e.dataTransfer.types[0]==="text/plain"&&(e.preventDefault(),this.element.querySelector("ul").classList.add("droppable"))}dropHandler(e){const r=e.dataTransfer.getData("text/plain");p.moveProject(r,this.type==="active"?l.Active:l.Finished)}dragLeaveHandler(e){this.element.querySelector("ul").classList.remove("droppable")}configure(){this.element.addEventListener("dragover",this.dragOverHandler),this.element.addEventListener("dragleave",this.dragLeaveHandler),this.element.addEventListener("drop",this.dropHandler),p.addListener(e=>{const r=e.filter(i=>this.type==="active"?i.status===l.Active:i.status===l.Finished);this.assignedProjects=r,this.renderProjects()})}renderContent(){const e=`${this.type}-projects-list`;this.element.querySelector("ul").id=e,this.element.querySelector("h2").textContent=`${this.type} Projects`}renderProjects(){const e=document.getElementById(`${this.type}-projects-list`);e.innerHTML="";for(const r of this.assignedProjects)new g(this.element.querySelector("ul").id,r)}}m([c],d.prototype,"dragOverHandler");m([c],d.prototype,"dropHandler");m([c],d.prototype,"dragLeaveHandler");new f;new d("active");new d("finished");
